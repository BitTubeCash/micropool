<!DOCTYPE html>
<html>
	<head>
        <meta charset="UTF-8">
		<link rel="stylesheet" href="resources/custom.css">
		<link rel="stylesheet" href="resources/css/fa.css">
		<script>
			function openTab(evt, cityName) {
				var i, tabcontent, tablinks;

				tabcontent = document.getElementsByClassName("tabcontent");
				for (i = 0; i < tabcontent.length; i++) {
					tabcontent[i].style.display = "none";
				}

				tablinks = document.getElementsByClassName("tablinks");
				for (i = 0; i < tablinks.length; i++) {
					tablinks[i].className = tablinks[i].className.replace(" active", "");
				}

				document.getElementById(cityName).style.display = "block";
				evt.currentTarget.className += " active";
			}
		</script>
	</head>
	<body onload="openTab(event,'tablog')">
		<div id="body">
			<table style="margin-top:20px;margin-bottom:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
				<colgroup>
					<col span="1" style="width: 33%;">
					<col span="1" style="width: 34%;">
					<col span="1" style="width: 33%;">
				</colgroup>
				<tr>
					<td colspan="3">
						<table style="width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 8rem">
								<col style="width: *">
							</colgroup>
							<tr>
								<td class="data_gps">
									<i class="fas fa-tachometer-alt-fast"></i> GPS
								</td>	
								<td class="data_gps">
									<input disabled="true" id="data_gps" type="text" value="0.00"/>
								</td>	
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td colspan="3">
						<table style="margin-top:20px; width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 125px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-wallet fa-lg fa-fw"></i>&ensp;Wallet</td>
								<td>
									<input id="mining_address" value="" onchange="updateData()" style="width:calc(100% - 12px)" type="text"/>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>
						<table style="margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 125px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-server fa-lg fa-fw"></i>&ensp;Daemon-Host</td>
								<td>
									<input id="daemonhost" value=""style="width:100%" onchange="updateData()" type="text"/>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 93px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-users fa-lg fa-fw"></i>&ensp;Workers</td>
								<td class="data">
									<input disabled="true" id="data_conn" style="width:100%" type="text" value="0"/>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 100px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-history fa-lg fa-fw"></i>&ensp;Blocktime</td>
								<td class="data">
									<input disabled="true" id="data_shares" style="width:calc(100% - 12px)" type="text" value="0"/>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>
						<table style="margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 125px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-phone-volume fa-lg fa-fw"></i>&ensp;Daemon-Port</td>
								<td>
									<input id="daemonport" value="" onchange="updateData()" style="width:100%" type="text"/>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 93px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-bars fa-lg fa-fw"></i>&ensp;Height</td>
								<td class="data">
									<input disabled="true" id="data_height" style="width:100%" type="text"/>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 100px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-dumbbell fa-lg fa-fw"></i></i>&ensp;Effort</td>
								<td class="data">
									<input disabled="true" value="0" id="data_blocks" style="width:calc(100% - 12px)" type="text"/>
								</td>
								</tr>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>
						<table style="margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 125px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-phone-volume fa-lg fa-fw"></i>&ensp;Pool-Port</td>
								<td>
									<input id="poolport" value="" onchange="updateData()" style="width:100%" type="text"/>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 93px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-chart-network fa-lg fa-fw"></i>&ensp;Network</td>
								<td class="data">
									<input disabled="true" id="data_diff" style="width:100%" type="text"/>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 100px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-cubes fa-lg fa-fw"></i>&ensp;Blocks</td>
								<td class="data">
									<input disabled="true" value="0" id="data_blocks" style="width:calc(100% - 12px)" type="text"/>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>
						<table style="margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 125px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-broadcast-tower fa-lg fa-fw"></i>&ensp;Remote node</td>
								<td>
									<span class="toggle"><a href="#"></a></span>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 93px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-unlock fa-lg fa-fw"></i>&ensp;Difficutly</td>
								<td class="data">
									<input disabled="true" id="data_diff" style="width:100%" type="text"/>
								</td>
							</tr>
						</table>
					</td>
					<td>
						<table style="padding-left:20px;margin-top:20px;width:100%;table-layout: fixed;border:0;" cellspacing="0" cellpadding="0">
							<colgroup>
								<col style="width: 100px">
								<col style="width: *">
							</colgroup>
							<tr>
								<td><i class="fas fa-clone fa-lg fa-fw"></i>&ensp;Shares</td>
								<td class="data">
									<input disabled="true" id="data_shares" style="width:calc(100% - 12px)" type="text" value="0"/>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>

			<div class="tab">
			<button class="tablinks" onclick="openTab(event, 'tablog')">Log&ensp;<i class="fas fa-cogs"></i></button>
			<button class="tablinks" onclick="openTab(event, 'tabworker')">Worker&ensp;<i class="fas fa-user-hard-hat"></i></button>
			<button class="tablinks" onclick="openTab(event, 'tabblocks')">Blocks&ensp;<i class="fas fa-cubes"></i></button>
			<button class="tablinks" onclick="openTab(event, 'tabhelp')">Help&ensp;<i class="fas fa-hands-helping"></i></button>
			</div>

			<div id="tablog" class="tabcontent">
				<div id="log">
				</div>
			</div>

			<div id="tabworker" class="tabcontent">
				<div id="workers">
				</div>
			</div>

			<div id="tabblocks" class="tabcontent">
				<div id="blocks">
				</div>
			</div>

			<div id="tabblocks" class="tabcontent">
				<div id="help">
				</div>
			</div>

		</div>
		<script>
			var electron = require('electron');
			var loglines = [];
			function updateData() { 
			
				if( (document.getElementById('daemonport').value < 1024)||(document.getElementById('daemonport').value > 65535))
					document.getElementById('daemonport').value=19950;
				if( (document.getElementById('poolport').value < 1024)||(document.getElementById('poolport').value > 65535))
					document.getElementById('poolport').value=14650;
				
				ipcRenderer.send('set', ['daemonport',parseFloat(document.getElementById('daemonport').value)|0]);
				ipcRenderer.send('set', ['poolport',parseFloat(document.getElementById('poolport').value)|0]);
				ipcRenderer.send('set', ['daemonhost',document.getElementById('daemonhost').value]);
				ipcRenderer.send('set', ['mining_address',document.getElementById('mining_address').value]);
			}
			const { ipcRenderer } = require('electron')
			ipcRenderer.send('get', 'daemonport');
			ipcRenderer.send('get', 'poolport');
			ipcRenderer.send('get', 'daemonhost');
			ipcRenderer.send('get', 'mining_address');
			
			ipcRenderer.on('get-reply', (event, arg) => {
				document.getElementById(arg[0]).value=arg[1];
			})
			ipcRenderer.on('workers', (event, arg) => {
				document.getElementById('workers').innerHTML=arg;
			})
			ipcRenderer.on('blocks', (event, arg) => {
				document.getElementById('blocks').innerHTML=arg;
			})
			ipcRenderer.on('log', (event, msg) => {
				var d = new Date();
				loglines.unshift(d.toISOString()+' <span>['+msg[0]+']</span> '+msg[1]);
				if (loglines.length > 100) loglines.pop();
				document.getElementById('log').innerHTML=loglines.join('<br/>');
			});
		</script>
	</body>
</html>
